(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a;return n=t,(a=[{key:"getInfo",value:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t=[]}},{key:"setInfo",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}}])&&e(n.prototype,a),t}();function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a;return t=e,(a=[{key:"_emptyElem",value:function(e){e.innerHTML=""}},{key:"_createNoteElem",value:function(e){var t=document.getElementById("noteTemp").content.cloneNode(!0).firstElementChild;return t.dataset.id=e.id,t.innerHTML=t.innerHTML.replace(/{{\s*(.*?)\s*}}/g,e.note),t}},{key:"updateNotes",value:function(e){var t=this,n=document.querySelector("#notes-container");this._emptyElem(n),e.map((function(e){n.appendChild(t._createNoteElem(e))}))}}])&&n(t.prototype,a),e}();function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_lsInstance",new t),o(this,"_uiInstance",new a),o(this,"_NOTES","notes")}var n,r;return n=e,(r=[{key:"addNote",value:function(e){var t=this._lsInstance.getInfo(this._NOTES),n={note:e,id:t.length+1};t.push(n),this._lsInstance.setInfo(this._NOTES,t),this._uiInstance.updateNotes(t)}},{key:"deleteNote",value:function(e){var t=this._lsInstance.getInfo(this._NOTES);t.map((function(n,a){n.id==e&&t.splice(a,1)})),this._lsInstance.setInfo(this._NOTES,t),this._uiInstance.updateNotes(t)}},{key:"editNote",value:function(e,t){var n=this._lsInstance.getInfo(this._NOTES);n.map((function(n){n.id==t&&(n.note=e)})),this._lsInstance.setInfo(this._NOTES,n),this._uiInstance.updateNotes(n)}}])&&i(n.prototype,r),e}(),u=document.querySelector("#form"),s=document.querySelector("#note"),c=document.querySelector("#notes-container"),l=!1,f=new r,d=new a,v=new t;document.addEventListener("DOMContentLoaded",(function(e){d.updateNotes(v.getInfo("notes"))})),u.addEventListener("submit",(function(e){if(e.preventDefault(),l)return document.querySelectorAll("[editing]").forEach((function(e){"true"==e.getAttribute("editing")&&f.editNote(s.value,e.dataset.id)})),s.value="",void(l=!1);f.addNote(s.value)})),c.addEventListener("click",(function(e){var t=e.target;if(t.classList.contains("del-button")){var n=t.parentElement.parentElement.parentElement;f.deleteNote(n.dataset.id)}if(t.classList.contains("edit-button")){var a=t.parentElement.parentElement.parentElement;l=!0,a.setAttribute("editing",!0),s.value=a.querySelector("li").innerHTML,s.focus()}}))})();